'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const date = require('@internationalized/date');

function alignCenter(date, duration, locale, min, max) {
  let halfDuration = {};
  for (let key in duration) {
    halfDuration[key] = Math.floor(duration[key] / 2);
    if (halfDuration[key] > 0 && duration[key] % 2 === 0) {
      halfDuration[key]--;
    }
  }
  let aligned = alignStart(date, duration, locale).subtract(halfDuration);
  return constrainStart(date, aligned, duration, locale, min, max);
}
function alignStart(date$1, duration, locale, min, max) {
  let aligned = date$1;
  if (duration.years) {
    aligned = date.startOfYear(date$1);
  } else if (duration.months) {
    aligned = date.startOfMonth(date$1);
  } else if (duration.weeks) {
    aligned = date.startOfWeek(date$1, locale);
  }
  return constrainStart(date$1, aligned, duration, locale, min, max);
}
function alignEnd(date, duration, locale, min, max) {
  let d = { ...duration };
  if (d.days) {
    d.days--;
  } else if (d.weeks) {
    d.weeks--;
  } else if (d.months) {
    d.months--;
  } else if (d.years) {
    d.years--;
  }
  let aligned = alignStart(date, duration, locale).subtract(d);
  return constrainStart(date, aligned, duration, locale, min, max);
}
function constrainStart(date$1, aligned, duration, locale, min, max) {
  if (min && date$1.compare(min) >= 0) {
    aligned = date.maxDate(aligned, alignStart(date.toCalendarDate(min), duration, locale));
  }
  if (max && date$1.compare(max) <= 0) {
    aligned = date.minDate(aligned, alignEnd(date.toCalendarDate(max), duration, locale));
  }
  return aligned;
}
function constrainValue(date$1, minValue, maxValue) {
  if (minValue) {
    date$1 = date.maxDate(date$1, date.toCalendarDate(minValue));
  }
  if (maxValue) {
    date$1 = date.minDate(date$1, date.toCalendarDate(maxValue));
  }
  return date$1;
}

exports.alignCenter = alignCenter;
exports.alignEnd = alignEnd;
exports.alignStart = alignStart;
exports.constrainStart = constrainStart;
exports.constrainValue = constrainValue;
