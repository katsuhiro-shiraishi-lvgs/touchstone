'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const domQuery = require('@zag-js/dom-query');
const layerStack = require('./layer-stack.js');

let originalBodyPointerEvents;
function assignPointerEventToLayers() {
  layerStack.layerStack.layers.forEach(({ node }) => {
    node.style.pointerEvents = layerStack.layerStack.isBelowPointerBlockingLayer(node) ? "none" : "auto";
  });
}
function clearPointerEvent(node) {
  node.style.pointerEvents = "";
}
const DATA_ATTR = "data-inert";
function disablePointerEventsOutside(node) {
  const doc = domQuery.getDocument(node);
  if (layerStack.layerStack.hasPointerBlockingLayer() && !doc.body.hasAttribute(DATA_ATTR)) {
    originalBodyPointerEvents = document.body.style.pointerEvents;
    doc.body.style.pointerEvents = "none";
    doc.body.setAttribute(DATA_ATTR, "");
  }
  return () => {
    if (layerStack.layerStack.hasPointerBlockingLayer())
      return;
    doc.body.style.pointerEvents = originalBodyPointerEvents;
    doc.body.removeAttribute(DATA_ATTR);
    if (doc.body.style.length === 0)
      doc.body.removeAttribute("style");
  };
}

exports.assignPointerEventToLayers = assignPointerEventToLayers;
exports.clearPointerEvent = clearPointerEvent;
exports.disablePointerEventsOutside = disablePointerEventsOutside;
