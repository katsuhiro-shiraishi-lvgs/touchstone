'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const domQuery = require('@zag-js/dom-query');
const utils = require('@zag-js/utils');

const dom = domQuery.createScope({
  getRootId: (ctx) => ctx.ids?.root ?? `accordion:${ctx.id}`,
  getItemId: (ctx, value) => ctx.ids?.item?.(value) ?? `accordion:${ctx.id}:item:${value}`,
  getContentId: (ctx, value) => ctx.ids?.content?.(value) ?? `accordion:${ctx.id}:content:${value}`,
  getTriggerId: (ctx, value) => ctx.ids?.trigger?.(value) ?? `accordion:${ctx.id}:trigger:${value}`,
  getRootEl: (ctx) => dom.getById(ctx, dom.getRootId(ctx)),
  getTriggers: (ctx) => {
    const ownerId = CSS.escape(dom.getRootId(ctx));
    const selector = `[aria-controls][data-ownedby='${ownerId}']:not([disabled])`;
    return domQuery.queryAll(dom.getRootEl(ctx), selector);
  },
  getFirstTriggerEl: (ctx) => utils.first(dom.getTriggers(ctx)),
  getLastTriggerEl: (ctx) => utils.last(dom.getTriggers(ctx)),
  getNextTriggerEl: (ctx, id) => domQuery.nextById(dom.getTriggers(ctx), dom.getTriggerId(ctx, id)),
  getPrevTriggerEl: (ctx, id) => domQuery.prevById(dom.getTriggers(ctx), dom.getTriggerId(ctx, id))
});

exports.dom = dom;
