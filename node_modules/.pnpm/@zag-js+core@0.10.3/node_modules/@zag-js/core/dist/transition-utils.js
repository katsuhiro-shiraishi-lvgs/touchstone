'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const guardUtils = require('./guard-utils.js');
const utils = require('./utils.js');
const guard = require('./packages/utilities/core/src/guard.js');

function toTarget(target) {
  return guard.isString(target) ? { target } : target;
}
function determineTransitionFn(transitions, guardMap) {
  return (context, event, meta) => {
    return utils.toArray(transitions).map(toTarget).find((transition) => {
      const determineGuard = guardUtils.determineGuardFn(transition.guard, guardMap);
      const guard = determineGuard(context, event, meta);
      return guard ?? transition.target ?? transition.actions;
    });
  };
}

exports.determineTransitionFn = determineTransitionFn;
exports.toTarget = toTarget;
