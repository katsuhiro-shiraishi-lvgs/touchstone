'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const guard = require('./packages/utilities/core/src/guard.js');
const warning = require('./packages/utilities/core/src/warning.js');

function determineDelayFn(delay, delaysMap) {
  return (context, event) => {
    if (guard.isNumber(delay))
      return delay;
    if (guard.isFunction(delay)) {
      return delay(context, event);
    }
    if (guard.isString(delay)) {
      const value = Number.parseFloat(delay);
      if (!Number.isNaN(value)) {
        return value;
      }
      if (delaysMap) {
        const valueOrFn = delaysMap?.[delay];
        warning.invariant(
          valueOrFn == null,
          `[@zag-js/core > determine-delay] Cannot determine delay for \`${delay}\`. It doesn't exist in \`options.delays\``
        );
        return guard.isFunction(valueOrFn) ? valueOrFn(context, event) : valueOrFn;
      }
    }
  };
}

exports.determineDelayFn = determineDelayFn;
